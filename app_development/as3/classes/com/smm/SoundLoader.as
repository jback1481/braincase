// $Id$/*// Usage:var gong_snd:soundLoader = new soundLoader("sounds/gong.mp3", false);*/package {  import flash.display.Sprite;  import flash.events.*;  import flash.media.Sound;  import flash.media.SoundChannel;  import flash.net.URLRequest;  public class SoundLoader extends Sprite {    private var _url:String;    private var _request:URLRequest;    private var _soundFactory:Sound;    private var _channel:SoundChannel;    private var _isPlaying:Boolean;    private var _soundComplete:Boolean;    private var _loopEnable:Boolean;      public function SoundLoader(soundURL:String, loop:Boolean):void {      _url = soundURL;      _request  = new URLRequest(_url);      _loopEnable = loop;      _soundComplete = false;      _soundFactory = new Sound();      _soundFactory.load(_request);            _soundFactory.addEventListener(Event.COMPLETE, soundCompleteHandler);      _soundFactory.addEventListener(Event.ID3, id3Handler);      _soundFactory.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);      _soundFactory.addEventListener(ProgressEvent.PROGRESS, progressHandler);    }        public function soundCompleted(event:Event):void {      _soundComplete = true;      if (_loopEnable == true) {        soundPlay();      }    }        public function soundPlay():void {      _channel = _soundFactory.play();      _isPlaying = true;      //trace (isPlaying);      _soundComplete = false;      _channel.addEventListener(Event.SOUND_COMPLETE, soundCompleted);    }        public function soundStop():void {      _channel.stop();      _channel.removeEventListener(Event.SOUND_COMPLETE, soundCompleted);    }        // Property access    public function get p_isPlaying () {      return _isPlaying;    }        public function set p_isPlaying (value) {      _isPlaying = value;    }        public function get p_isComplete () {      return _soundComplete;    }        private function soundCompleteHandler(event:Event):void {      //trace("soundCompleteHandler: " + event);    }        private function ioErrorHandler(event:Event):void {      //trace("ioErrorHandler: " + event);    }            private function id3Handler(event:Event):void {      //trace("id3Handler: " + event);    }    private function progressHandler(event:ProgressEvent):void {      //trace("progressHandler: " + event);    }  }}